<!doctype html>
<html lang="en">
<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" integrity="sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z" crossorigin="anonymous">
    <!-- Font Awesome CDN-->
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.14.0/css/all.css" integrity="sha384-HzLeBuhoNPvSl5KYnjx0BT+WB0QEEqLprO+NBkkk5gbc67FTaL7XIGa2w1L0Xbgc" crossorigin="anonymous">
   <link rel="stylesheet" href="style.css">
    <title>Hello, world!</title>
    
</head>
<body>
    
        <div class="container">
          <div class="row" style="padding-bottom: 25px;">
            <div class="col-sm-12" id="Dashboard"></div>
            
          </div>
        <div class="row">
            <div class="col-sm-5">
             <input type="text" id="inputValue" placeholder="Search for a stock...">
             <input type="submit" id="submitStock" value="Submit"></input>

             <div class="container-fluid"></div>
            
            <div class="user-stock">
              <div id="userDiv">
                <h4>Your Search</h4>
              </div>
              <div id="savedStock">
                <h4>Your Stocks</h4>
              </div>
            </div> 
            
            </div>
            
            
        



<!-- Optional JavaScript -->
<!-- jQuery first, then Popper.js, then Bootstrap JS -->
<!-- JQuery uncompressed -->
<script src="https://code.jquery.com/jquery-3.5.1.js" integrity="sha256-QWo7LDvxbWT2tbbQ97B53yJnYU3WhH/C8ycbRAkjPDc=" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js" integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js" integrity="sha384-B4gt1jrGC7Jh4AgTPSdUtOBvfO8shuf57BaghqFfPlYxofvL8/KUEfYiJOMMV+rV" crossorigin="anonymous"></script>
<script>


var displayStocks=["AAPL","GOOGL","AMZN","MSFT","TSLA"]

for (i=0;i<displayStocks.length;i++) {
  var mainStockURL="https://cors-anywhere.herokuapp.com/https://marketdata.websol.barchart.com/getHistory.json?apikey=247b0fb0737eb61a2ecf9faf065061e6&symbol="+displayStocks[i]+"&type=minutes&startDate=20100101&maxRecords=10&interval=60&order=asc&sessionFilter=EFK&splits=true&dividends=true&volume=sum&nearby=1&jerq=true"

$.ajax({
     url: mainStockURL,
     method: "GET"
   }).then(function(response) {
       console.log(response);
       
       var stockDiv=$("<div>")
       stockDiv.addClass("card")
        //getting stock name
        var stockName=response.results[i].symbol;
        var symbolP = $("<h5>").text(stockName);

          //getting stock time 
          var stockTime=response.results[i].timestamp;
          var timeP=$("<h6>").text(stockTime);

          //getting stock high
          var stockHigh= response.results[i].high;
          var highP= $("<p>").text("High: " + stockHigh);

          // getting stock low
          var stockLow= response.results[i].low;
          var lowP=$("<p>").text("Low: " + stockLow);

            //getting stock open 
            var stockOpen=response.results[i].open;
            var openP=$("<p>").text("Open: " + stockOpen);

            //getting stock close
            var stockClose=response.results[i].close;
            var closeP=$("<p>").text("Close: " + stockClose);

         //appending data to stock div
          stockDiv.append(symbolP, timeP, highP, lowP, openP, closeP);

          $(".container-fluid").append(stockDiv)
    
   });
}


var searchURL= `https://sandbox.iexapis.com/stable/stock/AAPL/batch?types=quote,news,chart&range=1m&last=10&token=pk_04614b4f4d0b4656a4a8c98f8da321a6`

$.ajax({
     url: searchURL,
     method: "GET"
   }).then(function(response) {
       console.log(response);
  
   });
   //ajax call for user searched stock
   

    
//     var searchURL="https://cors-anywhere.herokuapp.com/https://marketdata.websol.barchart.com/getHistory.json?apikey=247b0fb0737eb61a2ecf9faf065061e6&symbol="+symbol+"&type=minutes&startDate=20100101&maxRecords=10&interval=60&order=asc&sessionFilter=EFK&splits=true&dividends=true&volume=sum&nearby=1&jerq=true"

// // pulling information from barchart API
//     $.ajax({
//      url: searchURL,
//      method: "GET"
//    }).then(function(response) {
//        console.log(response);
//        var stockCall
//   showOnPage(symbol,response)
//     console.log(stockCall)
//    });
   
// }
// //creating onclick so stocks will show when clicking submit
// $("#submitStock").on("click",function(){
//     event.preventDefault();
//     var stockName=$("#inputValue").val();
//     userStock(stockName);
    
// })

// //creating function to how searched stock
// function showOnPage(symbol, response) {

//   var userDiv=$("<div>")
//     userDiv.addClass("card")
    
//     // getting Name for user search
//   var userStockName = response.results[0].symbol;
//   var userSymbolP=$("<h5>").text(userStockName)

//   //getting stock for user search
//   var userStockTime=response.results[0].timestamp
//   var userTimeP=$("<h6>").text(userStockTime)

//     //getting high for user search

//   var userStockHigh=response.results[0].high
//     var userHigh=$("<p>").text(userStockHigh)

//       //getting low for user search

//     var userStockLow=response.results[0].low
//     var userLow=$("<p>").text(userStockLow)
// // getting open reults for user search
//       var userStockOpen=response.results[0].open
//       var userOpen=$("<p>").text(userStockOpen)
// // getting close results for user search
//       var userStockClose=response.results[0].close
//       var userClose=$("<p>").text(userStockClose)


//   userDiv.append(userSymbolP,userTimeP,userHigh,userLow,userOpen,userClose)
//   $("#userDiv").append(userDiv)
//   stockCall=userStockName
//   return stockCall

// }



</script>

</body>
</html>